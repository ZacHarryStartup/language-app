name: Lambda update workflow for LambdaFunctionOverHttps
on:
  workflow_dispatch:
  push:
    branches:
      - main
    paths:
      -  lambda-functions/LambdaFunctionOverHttps.py
env:
  functionName: LambdaFunctionOverHttps
  
jobs:
  updateLambda:
    runs-on: ubuntu-latest
    steps:
      - name: checkout_repo
        uses: actions/checkout@v3
      - name: "Zip function"
        run: |
          zip code.zip lambda-functions/${{ env.functionName }}.py 
      - name: "Updated lambda"
        run: |
          aws lambda update-function-code \                                                 
            --function-name ${{ env.functionName }} \              
            --zip-file code.zip
